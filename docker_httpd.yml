- hosts: all
  tasks:
  - name: "Building SSH Enabled Docker Image"
    command: "docker build -t {{ ssh_enabled_docker_image_name }} ."
  - docker_image:
        name: "{{ ssh_enabled_docker_image_name }}"
        source: pull
  - docker_container:
        name: "{{ container_name }}"
        image: "{{ ssh_enabled_docker_image_name }}"
        interactive: yes
        tty: yes
        exposed_ports:
                - "80"
        ports:
                - "{{ exposed_base_os_port }}:80"
  - debug:
          msg: "IP Address of Launched Docker Container: {{ webos.container.NetworkSettings.IPAddress }}"
  - name: updating inventory
    blockinfile:
       path: "/root/practice/inventory.txt"
       block: |
              [dcont]
              {{webos['container']['NetworkSettings']['IPAddress']}} ansible_user=root ansible_ssh_pass=redhat
              marker: ""
